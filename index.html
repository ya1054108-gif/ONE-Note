<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>ICU è‡¨åºŠè£ç½®é€ŸæŸ¥æ‰‹å†Š (Pro)</title>
<style>
:root{
  --bg: #f1f5f9; 
  --card-bg: #ffffff; 
  --text-main: #0f172a; 
  --text-muted: #64748b; 
  --accent: #0284c7; 
  --accent-light: #e0f2fe;
  --danger: #e11d48; --danger-bg: #ffe4e6;
  --ok: #059669; --ok-bg: #d1fae5;
  --border: #e2e8f0;
  --header-h: 60px;
  --sidebar-w: 260px;
  --radius: 12px;
}

[data-theme="dark"]{
  --bg: #0f172a; 
  --card-bg: #1e293b; 
  --text-main: #f1f5f9; 
  --text-muted: #94a3b8; 
  --accent: #38bdf8; 
  --accent-light: rgba(56, 189, 248, 0.15);
  --danger: #fb7185; --danger-bg: rgba(225, 29, 72, 0.15);
  --ok: #34d399; --ok-bg: rgba(5, 150, 105, 0.15);
  --border: #334155;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

body{
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", sans-serif; 
  margin:0; background: var(--bg); color: var(--text-main); 
  height:100vh; overflow:hidden;
}

/* Header */
.header{
  height: var(--header-h); padding: 0 16px;
  display:flex; align-items:center; gap:12px; 
  background: var(--card-bg); border-bottom: 1px solid var(--border);
  position:fixed; top:0; left:0; right:0; z-index:100;
}
.logo-area{display:flex;align-items:center;gap:10px;cursor:pointer}
.logo-icon{
  width:32px;height:32px;border-radius:8px;
  background:linear-gradient(135deg,var(--accent),#2563eb);
  color:white;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:12px;
}
.app-title{font-size:16px; font-weight:700; color:var(--text-main); line-height:1.2}
.header-actions{margin-left:auto;}

.icon-btn{padding:8px; background:transparent; color:var(--text-main); border:none; cursor:pointer; border-radius:50%}
.icon-btn:hover{background:var(--accent-light); color:var(--accent)}

/* Sidebar */
.sidebar-overlay{
  position:fixed; top:0; left:0; right:0; bottom:0; z-index:140;
  background:rgba(0,0,0,0.5); display:none; opacity:0; transition:opacity 0.3s;
}
.sidebar-overlay.open{display:block; opacity:1}

.sidebar{
  position:fixed; top:0; bottom:0; left:0; z-index:150;
  width: var(--sidebar-w); background: var(--card-bg);
  border-right: 1px solid var(--border);
  transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
  display:flex; flex-direction:column;
}
.sidebar.open{transform: translateX(0)}
.sidebar-header{height:var(--header-h); border-bottom:1px solid var(--border); display:flex; align-items:center; padding:0 16px; justify-content:space-between}
.sidebar-scroll{overflow-y:auto; flex:1; padding:12px}
.nav-item{
  display:block; padding:12px; border-radius:8px;
  color:var(--text-muted); text-decoration:none; font-weight:500; font-size:15px;
  margin-bottom:4px;
}
.nav-item:hover{background:var(--bg); color:var(--text-main)}
.nav-item.active{background:var(--accent-light); color:var(--accent); font-weight:700}

/* Main Container */
.main-container{
  margin-top: var(--header-h);
  height: calc(100vh - var(--header-h));
  overflow-y: auto; scroll-behavior: smooth;
  padding: 20px;
}

/* Home Grid */
.home-grid{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:16px;
  max-width:1000px; margin:0 auto; animation: fadeUp 0.4s ease;
}
.device-card{
  background: var(--card-bg); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px;
  cursor: pointer; transition: all 0.2s; position: relative;
}
.device-card:hover{transform: translateY(-4px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); border-color:var(--accent)}
.card-icon{
  width: 48px; height: 48px; background: var(--accent-light); 
  border-radius: 12px; color: var(--accent);
  display: flex; align-items: center; justify-content: center; margin-bottom: 12px;
}
.card-title{font-size:18px; font-weight:700; margin:0 0 4px 0}
.card-desc{font-size:13px; color:var(--text-muted); line-height:1.5}

/* Detail Page */
.detail-page{display:none; max-width: 900px; margin: 0 auto; padding-bottom: 60px; animation: fadeIn 0.3s ease;}
.detail-page.active{display:block}

.detail-header{margin-bottom:20px}
.back-btn{
  background:transparent; border:1px solid var(--border); color:var(--text-muted);
  padding:6px 12px; border-radius:20px; font-size:13px; cursor:pointer; margin-bottom:12px;
  display:inline-flex; align-items:center; gap:4px;
}
.detail-title{font-size:24px; font-weight:800; margin:0}
.tag{font-size:12px; color:var(--accent); background:var(--accent-light); padding:2px 8px; border-radius:4px; font-weight:600}

.diagram-box{
  background: var(--card-bg); border: 1px dashed var(--border); border-radius: var(--radius);
  height: 160px; display:flex; justify-content:center; padding:10px; margin-bottom:20px;
}
.diagram-box svg{height:100%; width:100%; color:var(--text-main)}

/* Section Grids */
.section-grid{display:grid; grid-template-columns: 1fr 1fr; gap:16px; margin-bottom:16px}
.full-width{grid-column: 1 / -1}

.info-card{
  background: var(--card-bg); padding: 16px; border-radius: var(--radius);
  border: 1px solid var(--border); height: 100%;
}
.info-title{
  font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 10px; display: flex; align-items: center; gap: 6px;
}
.info-title::before{content:''; width:4px; height:14px; border-radius:2px; display:inline-block}

/* Color Coding */
.t-blue .info-title{color:var(--accent)} .t-blue .info-title::before{background:var(--accent)}
.t-green .info-title{color:var(--ok)} .t-green .info-title::before{background:var(--ok)}
.t-green.info-card{background:var(--ok-bg); border-color:transparent}
.t-red .info-title{color:var(--danger)} .t-red .info-title::before{background:var(--danger)}
.t-red.info-card{background:var(--danger-bg); border-color:transparent}
.t-gray .info-title{color:var(--text-muted)} .t-gray .info-title::before{background:var(--text-muted)}

.info-content{font-size:15px; line-height:1.6; color:var(--text-main)}
ul{margin:0; padding-left:18px} li{margin-bottom:4px}

@media (max-width: 768px){
  .section-grid{grid-template-columns: 1fr}
  .app-title small{display:none}
}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>

<header class="header">
  <button class="icon-btn" id="menuBtn">
    <svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
  </button>
  <div class="logo-area" onclick="goHome()">
    <div class="logo-icon">ICU</div>
    <div class="app-title">è‡¨åºŠè£ç½®é€ŸæŸ¥ <small style="font-weight:400;color:var(--text-muted);font-size:12px">Taiwan Edition</small></div>
  </div>
  <div class="header-actions">
    <button class="icon-btn" id="themeBtn">â—</button>
  </div>
</header>

<div class="sidebar-overlay" id="sidebarOverlay"></div>
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <span style="font-weight:700">è£ç½®ç›®éŒ„</span>
    <button class="icon-btn" id="closeSidebar">âœ•</button>
  </div>
  <div class="sidebar-scroll" id="sidebarList">
    <!-- List generated by JS -->
  </div>
</aside>

<div class="main-container" id="mainContainer">
  <!-- Content generated by JS -->
</div>

<script>
// --- è‡¨åºŠå…§å®¹è³‡æ–™åº« (Taiwanese Clinical Style) ---
const db = [
  {
    id: 'ecmo', title: 'ECMO è‘‰å…‹è†œ', short: 'Extracorporeal Life Support',
    icon: '<path d="M22 12h-4l-3 9L9 3l-3 9H2"/>',
    loc: '<b>VA mode</b>ï¼šè‚¡éœè„ˆ (In) â†’ è‚¡å‹•è„ˆ (Out)ã€‚<br><b>VV mode</b>ï¼šè‚¡éœè„ˆ (In) â†’ é ¸éœè„ˆ (Out)ã€‚',
    func: 'åˆ©ç”¨é›¢å¿ƒå¹«æµ¦ (Pump) èˆ‡æ°§åˆå™¨ (Artificial Lung) å–ä»£å¿ƒè‚ºåŠŸèƒ½ã€‚VA æ•‘å¿ƒ+è‚ºï¼›VV åƒ…æ•‘è‚ºã€‚',
    ind: '<ul><li><b>VA</b>ï¼šå¿ƒå› æ€§ä¼‘å…‹ã€ECPRã€åš´é‡å¿ƒè‚Œç‚ã€ç„¡æ³•è„«é›¢é«”å¤–å¾ªç’°ã€‚</li><li><b>VV</b>ï¼šé‡åº¦ ARDS (P/F ratio < 80)ã€åš´é‡ COâ‚‚ retentionã€Lung restã€‚</li></ul>',
    contra: '<ul><li><b>çµ•å°</b>ï¼šæœ«æœŸç–¾ç—…ç„¡æ³•å¾©åŸã€ä¸å¯é€†è…¦å‚·ã€‚</li><li><b>ç›¸å°</b>ï¼šåš´é‡å‡ºè¡€å‚¾å‘ã€ä¸»å‹•è„ˆå‰é›¢ (VA çµ•å°ç¦å¿Œ)ã€‚</li></ul>',
    comp: '<ul><li><b>å‡ºè¡€</b>ï¼šå…¨èº«è‚ç´ åŒ–ï¼Œæœ€å¸¸è¦‹ã€‚</li><li><b>ä¸‹è‚¢ç¼ºè¡€</b> (VA)ï¼šéœ€æ¥ DPC (é ç«¯çŒæµç®¡) é¿å…æˆªè‚¢ã€‚</li><li><b>å—åŒ—ç—‡å€™ç¾¤</b> (Harlequin)ï¼šVA ç‰¹æœ‰ï¼Œä¸ŠåŠèº«ç¼ºæ°§ã€‚</li></ul>',
    care: 'ç›£æ¸¬ Flow (3-5L/min)ã€RPMã€è·¨è†œå£“å·® (Delta P)ã€‚æ³¨æ„é¡è‰² (éœè„ˆæš—ç´…/å‹•è„ˆé®®ç´…)ã€‚Heater æº«åº¦è¨­å®šã€‚'
  },
  {
    id: 'iabp', title: 'IABP ä¸»å‹•è„ˆæ°£çƒå¹«æµ¦', short: 'Counter-pulsation',
    icon: '<path d="M12 2v20M8 12h8"/><circle cx="12" cy="12" r="8" fill="none" stroke="currentColor"/>',
    loc: 'ç”±è‚¡å‹•è„ˆæ‰“å…¥ã€‚æ°£çƒå°–ç«¯ (Tip) æ‡‰ä½æ–¼<b>å·¦é–éª¨ä¸‹å‹•è„ˆé–‹å£ä¸‹æ–¹ 2cm</b> (ç´„ T2-T3)ã€‚',
    func: '<b>åæåŸç†</b>ï¼šèˆ’å¼µæœŸå……æ°£ (å¢åŠ å† ç‹€å‹•è„ˆçŒæµ)ï¼Œæ”¶ç¸®æœŸæ´©æ°£ (ç”¢ç”Ÿè² å£“ã€é™ä½å¾Œè² è·)ã€‚',
    ind: '<ul><li>AMI ä½µç™¼å¿ƒå› æ€§ä¼‘å…‹ã€‚</li><li>High-risk PCI æˆ– CABG è¡“å‰/è¡“å¾Œ Supportã€‚</li><li>äºŒå°–ç“£é€†æµ (MR) é€ æˆçš„ä¸ç©©ã€‚</li></ul>',
    contra: '<ul><li><b>ä¸»å‹•è„ˆç“£é–‰é–ä¸å…¨ (AR)</b>ï¼šçµ•å°ç¦å¿Œï¼æœƒæŠŠè¡€æ‰“å› LV é€ æˆå¿ƒè¡°ç«­åŠ åŠ‡ã€‚</li><li><b>ä¸»å‹•è„ˆå‰é›¢</b> (Aortic Dissection)ã€‚</li><li>åš´é‡è…¹ä¸»å‹•è„ˆç˜¤ã€‚</li></ul>',
    comp: '<ul><li><b>ä¸‹è‚¢ç¼ºè¡€</b>ï¼šæœ€å¸¸è¦‹ï¼Œéš¨æ™‚æ‘¸è¶³èƒŒå‹•è„ˆã€‚</li><li>æ°£çƒç ´è£‚ (ç®¡è·¯è¦‹è¡€)ã€‚</li><li>è¡€å°æ¿ä½ä¸‹ (Thrombocytopenia)ã€‚</li></ul>',
    care: 'æ’ç®¡å´å¤§è…¿<b>åš´ç¦å½æ›²</b>ï¼ŒåºŠé ­ < 30åº¦ã€‚è§€å¯Ÿå……æ°£æ™‚æ©Ÿ (Dicrotic notch)ã€‚'
  },
  {
    id: 'cvc', title: 'CVC ä¸­å¿ƒéœè„ˆå°ç®¡', short: 'Central Line',
    icon: '<path d="M12 5v14M5 12h14"/>',
    loc: 'å¸¸è¦‹ï¼šå…§é ¸ (IJV)ã€é–éª¨ä¸‹ (Subclavian)ã€è‚¡ (Femoral)ã€‚Tip ä½æ–¼ SVC/RA äº¤ç•Œ (Cavo-atrial junction)ã€‚',
    func: 'å»ºç«‹å¤§ç®¡å¾‘è¼¸æ¶²é€šé“ã€ç›£æ¸¬ CVPã€çµ¦äºˆåˆºæ¿€æ€§è—¥ç‰©ã€‚',
    ind: '<ul><li>å‘¨é‚Šæ‰“ä¸åˆ° (Difficult IV)ã€‚</li><li>éœ€çµ¦å‡å£“åŠ‘ (Inotropes)ã€TPNã€é«˜æ¿ƒåº¦ K+ã€‚</li><li>æ€¥æ•‘å¤§é‡è¼¸æ¶²ã€‚</li></ul>',
    contra: '<ul><li>ç©¿åˆºéƒ¨ä½æ„ŸæŸ“ã€‚</li><li>åš´é‡å‡è¡€åŠŸèƒ½ç•°å¸¸ (ç›¸å°ç¦å¿Œï¼ŒIJV/Fem è¼ƒå¯å£“è¿«æ­¢è¡€)ã€‚</li></ul>',
    comp: '<ul><li><b>æ°£èƒ¸/è¡€èƒ¸</b>ï¼šOn Subclavian é¢¨éšªæœ€é«˜ï¼Œè¡“å¾Œå¿…ç…§ CXRã€‚</li><li><b>CLABSI</b>ï¼šå°ç®¡ç›¸é—œè¡€æµæ„ŸæŸ“ã€‚</li><li>å¿ƒå¾‹ä¸æ•´ (å°çµ²åˆºåˆ°å¿ƒè‡Ÿ)ã€‚</li></ul>',
    care: 'è½å¯¦ Bundle Careã€‚ä¸‰æ¶ˆæ›´æ›æ•·æ–™ã€‚æ²’ç”¨åˆ°çš„ç®¡è…”éœ€ Flush/Lockã€‚ç§»é™¤æ™‚è«‹ç—…äºº Valsalva é˜²ç©ºæ°£æ “å¡ã€‚'
  },
  {
    id: 'aline', title: 'A-line å‹•è„ˆå°ç®¡', short: 'Arterial Line',
    icon: '<path d="M2 12h20M2 12l2-2m2 2l2 2"/>',
    loc: 'é¦–é¸æ©ˆå‹•è„ˆ (Radial)ã€‚æ¬¡é¸è‚¡å‹•è„ˆ (Femoral)ã€è¶³èƒŒå‹•è„ˆã€‚',
    func: 'æä¾› Beat-to-beat å³æ™‚è¡€å£“ã€æ–¹ä¾¿æŠ½å– ABGã€‚',
    ind: '<ul><li>è¡€å‹•ä¸ç©©éœ€ç”¨ Vasopressorã€‚</li><li>å‘¼å¸è¡°ç«­éœ€é »ç¹é©—è¡€æ°£ã€‚</li><li>è¡“ä¸­ç²¾å¯†ç›£æ¸¬ã€‚</li></ul>',
    contra: '<ul><li><b>Allen\'s Test ç•°å¸¸</b> (å´æ”¯å¾ªç’°å·®)ã€‚</li><li>å±€éƒ¨æ„ŸæŸ“æˆ–è¡€ç®¡é˜»å¡ç–¾ç—… (PVD)ã€‚</li></ul>',
    comp: '<ul><li><b>è¡€æ “æ “å¡</b>ï¼šæœ«æ¢¢ç™¼ç´ºã€å£æ­»ã€‚</li><li>å‡ºè¡€/è¡€è…«ã€‚</li><li>æ„ŸæŸ“ã€‚</li></ul>',
    care: 'åŠ å£“è¢‹ Keep 300 mmHgã€‚Transducer å°é½Šç¬¬ 4 è‚‹é–“è…‹ä¸­ç·šã€‚<b>åš´ç¦çµ¦è—¥</b> (æœƒæˆªè‚¢)ã€‚'
  },
  {
    id: 'swan', title: 'Swan-Ganz è‚ºå‹•è„ˆå°ç®¡', short: 'PAC (Hemodynamics)',
    icon: '<circle cx="12" cy="12" r="10"/><path d="M12 12l4 4"/>',
    loc: 'ç¶“å¤§éœè„ˆ â†’ RA â†’ RV â†’ PA â†’ åµŒå¡æ–¼è‚ºå°å‹•è„ˆ (Wedge)ã€‚',
    func: 'æ¸¬é‡ PCWP (å·¦å¿ƒå‰è² è·)ã€CO (å¿ƒè¼¸å‡ºé‡)ã€SVR (è¡€ç®¡é˜»åŠ›)ã€‚',
    ind: '<ul><li>ä¸æ˜åŸå› ä¼‘å…‹ (é‘‘åˆ¥å¿ƒå› æ€§/æ•—è¡€æ€§)ã€‚</li><li>è¤‡é›œå¿ƒè‡Ÿæ‰‹è¡“è¡“å¾Œã€‚</li><li>åš´é‡è‚ºé«˜å£“è©•ä¼°ã€‚</li></ul>',
    contra: '<ul><li>å³å¿ƒå…§è…«ç˜¤æˆ–è¡€æ “ã€‚</li><li>ä¸‰å°–ç“£æ©Ÿæ¢°ç“£è†œ (Mechanical Valve)ã€‚</li></ul>',
    comp: '<ul><li><b>è‚ºå‹•è„ˆç ´è£‚</b>ï¼šè‡´æ­»ç‡é«˜ï¼Œæ°£çƒå……æ°£ä¸å¯å¤ªä¹…ã€‚</li><li>å¿ƒå¾‹ä¸æ•´ (VPC/VT)ã€‚</li><li>å°ç®¡æ‰“çµã€‚</li></ul>',
    care: 'æ¸¬å®Œ PCWP <b>ç«‹åˆ»æ”¾æ°£</b>ï¼Œé¿å…è‚ºæ¢—å¡ã€‚æ¯æ—¥æª¢è¦–æ³¢å½¢ä½ç½® (Migration)ã€‚'
  },
  {
    id: 'picc', title: 'PICC å‘¨é‚Šä¸­å¿ƒå°ç®¡', short: 'Long-term Access',
    icon: '<rect x="4" y="4" width="16" height="16" rx="2"/>',
    loc: 'ç”±ä¸Šè‡‚è²´è¦éœè„ˆ (Basilic) ç½®å…¥ï¼Œå°–ç«¯ä½æ–¼ SVCã€‚',
    func: 'ä¸­é•·æœŸè¼¸æ¶²é€šè·¯ (æ•¸é€±~æ•¸æœˆ)ï¼Œç„¡æ°£èƒ¸é¢¨éšªã€‚',
    ind: '<ul><li>æŠ—ç”Ÿç´ æ²»ç™‚ > 14å¤©ã€‚</li><li>TPNã€åŒ–ç™‚ã€‚</li><li>å‘¨é‚Šè¡€ç®¡æ¢ä»¶æ¥µå·®ã€‚</li></ul>',
    contra: '<ul><li>æ‚£å´æœ‰æ´—è…å»”ç®¡ (AV fistula)ã€‚</li><li>æ‚£å´ä¹³ç™Œæ·‹å·´å»“æ¸… (é¿å…æ·‹å·´æ°´è…«)ã€‚</li></ul>',
    comp: '<ul><li>å°ç®¡ç§»ä½ã€‚</li><li>éœè„ˆç‚ (Phlebitis)ã€‚</li><li>ä¸Šè‚¢ DVT (æ¸¬é‡è‡‚åœ)ã€‚</li></ul>',
    care: '<b>ç¦é‡è¡€å£“/æŠ½è¡€</b> (è©²å´)ã€‚æ¯é€±æ›´æ›æ•·æ–™ã€‚'
  }
];

// --- ç¨‹å¼é‚è¼¯ ---
const mainContainer = document.getElementById('mainContainer');
const sidebarList = document.getElementById('sidebarList');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('sidebarOverlay');

// 1. Render Sidebar & Home Grid
function init(){
  // Sidebar
  let navHTML = `<a href="#" class="nav-item" onclick="goHome(); return false;">ğŸ  Dashboard (é¦–é )</a>`;
  navHTML += db.map(d => `<a href="#${d.id}" class="nav-item" onclick="route('${d.id}'); return false;">${d.title}</a>`).join('');
  sidebarList.innerHTML = navHTML;

  // Check Hash
  const hash = location.hash.replace('#','');
  if(hash && db.find(d=>d.id===hash)) renderDetail(hash);
  else renderHome();
}

// 2. Render Home
function renderHome(){
  let html = `<div class="home-grid">`;
  html += db.map(d => `
    <div class="device-card" onclick="route('${d.id}')">
      <div class="card-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${d.icon}</svg></div>
      <h3 class="card-title">${d.title}</h3>
      <div class="card-desc">${d.func}</div>
    </div>
  `).join('');
  html += `</div>`;
  mainContainer.innerHTML = html;
  closeSidebar();
}

// 3. Render Detail (å…­å¤§å€å¡Šçµæ§‹)
function renderDetail(id){
  const d = db.find(item => item.id === id);
  if(!d) return renderHome();

  const svg = getDiagram(id);
  
  const html = `
    <div class="detail-page active">
      <button class="back-btn" onclick="goHome()">â† è¿”å›åˆ—è¡¨</button>
      <div class="detail-header">
        <span class="tag">${d.short}</span>
        <h1 class="detail-title">${d.title}</h1>
      </div>

      <div class="diagram-box">${svg}</div>

      <!-- ç¬¬ä¸€æ’ï¼šè—è‰²åŸºç¤è³‡è¨Š -->
      <div class="section-grid t-blue">
        <div class="info-card">
          <div class="info-title">ğŸ“ ä½ç½® (Location)</div>
          <div class="info-content">${d.loc}</div>
        </div>
        <div class="info-card">
          <div class="info-title">âš™ ä½œç”¨åŸç† (Function)</div>
          <div class="info-content">${d.func}</div>
        </div>
      </div>

      <!-- ç¬¬äºŒæ’ï¼šç¶ è‰²é©æ‡‰ç—‡ -->
      <div class="section-grid t-green">
        <div class="info-card full-width">
          <div class="info-title">âœ… é©æ‡‰ç—‡ (Indication)</div>
          <div class="info-content">${d.ind}</div>
        </div>
      </div>

      <!-- ç¬¬ä¸‰æ’ï¼šç´…è‰²è­¦ç¤º (ç¦å¿Œ+ä½µç™¼ç—‡) -->
      <div class="section-grid t-red">
        <div class="info-card">
          <div class="info-title">â›” ç¦å¿Œç—‡ (Contraindication)</div>
          <div class="info-content">${d.contra}</div>
        </div>
        <div class="info-card">
          <div class="info-title">âš  å¸¸è¦‹ä½µç™¼ç—‡ (Complication)</div>
          <div class="info-content">${d.comp}</div>
        </div>
      </div>

      <!-- ç¬¬å››æ’ï¼šç°è‰²è­·ç† -->
      <div class="section-grid t-gray">
        <div class="info-card full-width">
          <div class="info-title">ğŸ›¡ è­·ç†é‡é» (Nursing Care)</div>
          <div class="info-content">${d.care}</div>
        </div>
      </div>
    </div>
  `;
  mainContainer.innerHTML = html;
  mainContainer.scrollTop = 0;
  closeSidebar();
}

// Diagram Generator (SVG)
function getDiagram(type){
  const ac = 'var(--accent)'; const da = 'var(--danger)'; const txt = 'currentColor';
  let inner = '';
  if(type === 'ecmo'){
    inner = `<path d="M40 80 Q60 90 80 40 L100 20" stroke="${ac}" stroke-width="4" fill="none" marker-end="url(#arrow)"/><rect x="70" y="65" width="40" height="30" rx="4" stroke="${ac}" fill="none" opacity="0.5"/><text x="80" y="85" font-size="10" fill="${txt}">Pump</text><path d="M120 80 L150 80 Q170 80 170 50 L170 20" stroke="${da}" stroke-width="4" fill="none"/>`;
  } else if (type === 'iabp'){
    inner = `<path d="M100 10 L100 150" stroke="${da}" stroke-width="14" opacity="0.15"/><rect x="95" y="50" width="10" height="40" rx="5" fill="#f59e0b"/><text x="115" y="75" font-size="10" fill="${txt}">Balloon (Ao)</text>`;
  } else if (['cvc','picc','swan'].includes(type)){
    inner = `<path d="M100 10 L100 100" stroke="${ac}" stroke-width="16" opacity="0.15"/><text x="115" y="50" font-size="10" fill="${txt}">SVC</text><path d="M50 20 L80 40 L100 40" stroke="#eab308" stroke-width="3" fill="none"/><circle cx="50" cy="20" r="4" fill="#eab308"/>`;
  } else if (type === 'aline'){
    inner = `<path d="M20 60 L180 60" stroke="${da}" stroke-width="2" opacity="0.3"/><path d="M20 60 L40 40 L60 70 L80 30 L100 60 L120 60" stroke="${da}" stroke-width="2" fill="none"/><text x="130" y="65" font-size="12" fill="${txt}">ABP</text>`;
  }
  return `<svg viewBox="0 0 200 100" fill="none" stroke="currentColor">${inner}</svg>`;
}

// Router
function route(id){ location.hash = id; renderDetail(id); }
function goHome(){ location.hash = ''; renderHome(); }

// UI Helpers
const menuBtn = document.getElementById('menuBtn');
const closeBtn = document.getElementById('closeSidebar');
const themeBtn = document.getElementById('themeBtn');

function openSidebar(){ sidebar.classList.add('open'); overlay.classList.add('open'); }
function closeSidebar(){ sidebar.classList.remove('open'); overlay.classList.remove('open'); }

menuBtn.addEventListener('click', openSidebar);
closeBtn.addEventListener('click', closeSidebar);
overlay.addEventListener('click', closeSidebar);

themeBtn.addEventListener('click', ()=>{
  const h = document.documentElement;
  h.setAttribute('data-theme', h.hasAttribute('data-theme') ? '' : 'dark');
});

window.addEventListener('popstate', init);
init();
</script>
</body>
</html>
