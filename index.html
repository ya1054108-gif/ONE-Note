<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>ICU ç‰©ç†æ²»ç™‚è£ç½®é€ŸæŸ¥ (PT Edition)</title>
<style>
:root{
  --bg: #f8fafc; 
  --card-bg: #ffffff; 
  --text-main: #1e293b; 
  --text-muted: #64748b; 
  
  /* PT Specific Colors */
  --accent: #0ea5e9; /* Sky Blue */
  --accent-light: #e0f2fe;
  --danger: #ef4444; --danger-bg: #fee2e2;
  --warning: #f59e0b; --warning-bg: #fef3c7; /* PT Caution */
  --ok: #10b981; --ok-bg: #d1fae5;
  
  --border: #e2e8f0;
  --header-h: 60px;
  --sidebar-w: 260px;
  --radius: 12px;
}

[data-theme="dark"]{
  --bg: #0f172a; 
  --card-bg: #1e293b; 
  --text-main: #f1f5f9; 
  --text-muted: #94a3b8; 
  --accent: #38bdf8; 
  --accent-light: rgba(56, 189, 248, 0.15);
  --danger: #f87171; --danger-bg: rgba(225, 29, 72, 0.15);
  --warning: #fbbf24; --warning-bg: rgba(245, 158, 11, 0.15);
  --ok: #34d399; --ok-bg: rgba(5, 150, 105, 0.15);
  --border: #334155;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

body{
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", sans-serif; 
  margin:0; background: var(--bg); color: var(--text-main); 
  height:100vh; overflow:hidden;
}

/* Header */
.header{
  height: var(--header-h); padding: 0 16px;
  display:flex; align-items:center; gap:12px; 
  background: var(--card-bg); border-bottom: 1px solid var(--border);
  position:fixed; top:0; left:0; right:0; z-index:100;
}
.logo-area{display:flex;align-items:center;gap:10px;cursor:pointer}
.logo-icon{
  width:32px;height:32px;border-radius:8px;
  background:linear-gradient(135deg,var(--accent),#2563eb);
  color:white;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:14px;
}
.app-title{font-size:16px; font-weight:700; color:var(--text-main); line-height:1.2}
.header-actions{margin-left:auto;}

.icon-btn{padding:8px; background:transparent; color:var(--text-main); border:none; cursor:pointer; border-radius:50%}
.icon-btn:hover{background:var(--accent-light); color:var(--accent)}

/* Sidebar */
.sidebar-overlay{
  position:fixed; top:0; left:0; right:0; bottom:0; z-index:140;
  background:rgba(0,0,0,0.5); display:none; opacity:0; transition:opacity 0.3s;
}
.sidebar-overlay.open{display:block; opacity:1}

.sidebar{
  position:fixed; top:0; bottom:0; left:0; z-index:150;
  width: var(--sidebar-w); background: var(--card-bg);
  border-right: 1px solid var(--border);
  transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4,0,0.2,1);
  display:flex; flex-direction:column;
}
.sidebar.open{transform: translateX(0)}
.sidebar-header{height:var(--header-h); border-bottom:1px solid var(--border); display:flex; align-items:center; padding:0 16px; justify-content:space-between}
.sidebar-scroll{overflow-y:auto; flex:1; padding:12px}
.nav-item{
  display:block; padding:12px; border-radius:8px;
  color:var(--text-muted); text-decoration:none; font-weight:500; font-size:15px;
  margin-bottom:4px;
}
.nav-item:hover{background:var(--bg); color:var(--text-main)}
.nav-item.active{background:var(--accent-light); color:var(--accent); font-weight:700}

/* Main Container */
.main-container{
  margin-top: var(--header-h);
  height: calc(100vh - var(--header-h));
  overflow-y: auto; scroll-behavior: smooth;
  padding: 20px;
}

/* Home Grid */
.home-grid{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:16px;
  max-width:1000px; margin:0 auto; animation: fadeUp 0.4s ease;
}
.device-card{
  background: var(--card-bg); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px;
  cursor: pointer; transition: all 0.2s; position: relative;
}
.device-card:hover{transform: translateY(-4px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); border-color:var(--accent)}
.card-icon{
  width: 48px; height: 48px; background: var(--accent-light); 
  border-radius: 12px; color: var(--accent);
  display: flex; align-items: center; justify-content: center; margin-bottom: 12px;
}
.card-title{font-size:18px; font-weight:700; margin:0 0 4px 0}
.card-desc{font-size:13px; color:var(--text-muted); line-height:1.5}

/* Detail Page */
.detail-page{display:none; max-width: 900px; margin: 0 auto; padding-bottom: 60px; animation: fadeIn 0.3s ease;}
.detail-page.active{display:block}

.detail-header{margin-bottom:20px}
.back-btn{
  background:transparent; border:1px solid var(--border); color:var(--text-muted);
  padding:6px 12px; border-radius:20px; font-size:13px; cursor:pointer; margin-bottom:12px;
  display:inline-flex; align-items:center; gap:4px;
}
.detail-title{font-size:24px; font-weight:800; margin:0}
.tag{font-size:12px; color:var(--accent); background:var(--accent-light); padding:2px 8px; border-radius:4px; font-weight:600}

/* UPDATED DIAGRAM STYLES */
.diagram-box{
  background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
  height: 220px; 
  display:flex; justify-content:center; align-items:center;
  padding:10px; margin-bottom:20px;
  overflow: hidden;
  position: relative;
}
.diagram-box svg{
  width:100%; height:100%; 
  color:var(--text-main);
}

/* Section Grids */
.section-grid{display:grid; grid-template-columns: 1fr 1fr; gap:16px; margin-bottom:16px}
.full-width{grid-column: 1 / -1}

.info-card{
  background: var(--card-bg); padding: 16px; border-radius: var(--radius);
  border: 1px solid var(--border); height: 100%;
}
.info-title{
  font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 10px; display: flex; align-items: center; gap: 6px;
}
.info-title::before{content:''; width:4px; height:14px; border-radius:2px; display:inline-block}

/* PT Specific Color Coding */
.t-blue .info-title{color:var(--accent)} .t-blue .info-title::before{background:var(--accent)}
.t-red .info-title{color:var(--danger)} .t-red .info-title::before{background:var(--danger)}
.t-red.info-card{background:var(--danger-bg); border-color:transparent}

/* PT Action Card (Special) */
.t-pt .info-title{color:#b45309;} .t-pt .info-title::before{background:#f59e0b;}
.t-pt.info-card{background:var(--warning-bg); border:1px solid #fcd34d;}

.info-content{font-size:15px; line-height:1.6; color:var(--text-main)}
ul{margin:0; padding-left:18px} li{margin-bottom:4px}
b{font-weight:700; color:var(--text-main)}

@media (max-width: 768px){
  .section-grid{grid-template-columns: 1fr}
  .app-title small{display:none}
}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>

<header class="header">
  <button class="icon-btn" id="menuBtn">
    <svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
  </button>
  <div class="logo-area" onclick="goHome()">
    <div class="logo-icon">PT</div>
    <div class="app-title">ICU ç‰©ç†æ²»ç™‚é€ŸæŸ¥ <small style="font-weight:400;color:var(--text-muted);font-size:12px">Physio Edition</small></div>
  </div>
  <div class="header-actions">
    <button class="icon-btn" id="themeBtn">â—</button>
  </div>
</header>

<div class="sidebar-overlay" id="sidebarOverlay"></div>
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <span style="font-weight:700">è£ç½®ç›®éŒ„</span>
    <button class="icon-btn" id="closeSidebar">âœ•</button>
  </div>
  <div class="sidebar-scroll" id="sidebarList">
    <!-- List generated by JS -->
  </div>
</aside>

<div class="main-container" id="mainContainer">
  <!-- Content generated by JS -->
</div>

<script>
// --- PT å°ˆç”¨è³‡æ–™åº« ---
const db = [
  {
    id: 'ecmo', title: 'ECMO è‘‰å…‹è†œ', short: 'Life Support',
    icon: '<path d="M22 12h-4l-3 9L9 3l-3 9H2"/>',
    loc: '<b>VA</b>: Femoral V. (In) â†’ Femoral A. (Out)<br><b>VV</b>: Femoral V. (In) â†’ Jugular V. (Out)',
    func: 'å–ä»£å¿ƒè‚ºåŠŸèƒ½ã€‚VA æ•‘å¿ƒ+è‚ºï¼›VV åƒ…æ•‘è‚ºã€‚ç®¡è·¯ç²—ä¸”ç¡¬ï¼Œå®¹æ˜“å—æ“ºä½å½±éŸ¿ã€‚',
    ind: 'å¿ƒå› æ€§ä¼‘å…‹ã€ECPRã€ARDSã€‚',
    contra: '<ul><li><b>VA (Femoral)</b>ï¼šåŒå´é«–é—œç¯€å±ˆæ›²ç¦ > 30åº¦ã€‚</li><li><b>VV (Jugular)</b>ï¼šé ¸éƒ¨éåº¦æ—‹è½‰/ä¼¸å±•ã€‚</li><li>è¡€æµå‹•åŠ›å­¸æ¥µåº¦ä¸ç©©ã€‚</li></ul>',
    comp: '<ul><li><b>ç®¡è·¯æ»‘è„«</b>ï¼šå¤§å‡ºè¡€ï¼Œè‡´æ­»ç‡æ¥µé«˜ã€‚</li><li><b>ä¸‹è‚¢ç¼ºè¡€</b>ï¼šéš¨æ™‚æ‘¸è¶³èƒŒå‹•è„ˆã€‚</li></ul>',
    pt_precautions: '<b>[æ¥µé«˜é¢¨éšª]</b><br>1. <b>Mobilization</b>ï¼šè‹¥æ’è‚¡å‹•è„ˆ (Femoral)ï¼Œåš´ç¦åèµ·å¤§æ–¼ 30-45 åº¦ (ä¾å„é™¢ Protocol)ï¼Œé€šå¸¸ Bed restã€‚<br>2. <b>Flow ç›£æ¸¬</b>ï¼šç¿»èº«æˆ–é‹å‹•æ™‚è‹¥ Flow é©Ÿé™æˆ–ç®¡è·¯æŠ–å‹•ï¼Œç«‹å³åœæ­¢å‹•ä½œä¸¦å¾©ä½ã€‚<br>3. <b>DPC</b>ï¼šç¢ºèªé ç«¯çŒæµç®¡æœ‰ç„¡æŠ˜åˆ°ï¼Œé¿å…è‚¢é«”å£æ­»ã€‚'
  },
  {
    id: 'iabp', title: 'IABP ä¸»å‹•è„ˆæ°£çƒå¹«æµ¦', short: 'Heart Assist',
    icon: '<path d="M12 2v20M8 12h8"/><circle cx="12" cy="12" r="8" fill="none" stroke="currentColor"/>',
    loc: 'Femoral Artery (è‚¡å‹•è„ˆ)ã€‚Tip ä½æ–¼ä¸»å‹•è„ˆå¼“ä¸‹æ–¹ã€‚',
    func: 'å¢åŠ å† ç‹€å‹•è„ˆçŒæµï¼Œæ¸›è¼•å¿ƒè‡Ÿå¾Œè² è·ã€‚',
    ind: 'å¿ƒå› æ€§ä¼‘å…‹ã€é«˜é¢¨éšªå¿ƒå°ç®¡è¡“å¾Œã€‚',
    contra: '<ul><li><b>çµ•å°ç¦å¿Œ</b>ï¼šä¸‹åºŠæ´»å‹• (OOB)ã€‚</li><li>æ’ç®¡å´é«–é—œç¯€å±ˆæ›² (Hip Flexion)ã€‚</li><li>ä¸»å‹•è„ˆç“£é–‰é–ä¸å…¨ (AR)ã€‚</li></ul>',
    comp: '<ul><li>ä¸‹è‚¢ç¼ºè¡€ (Limb Ischemia)ã€‚</li><li>å°ç®¡ç§»ä½å°è‡´è…å‹•è„ˆé˜»å¡ (å°¿é‡æ¸›å°‘)ã€‚</li></ul>',
    pt_precautions: '<b>[çµ•å°è‡¥åºŠ]</b><br>1. <b>æ´»å‹•é™åˆ¶</b>ï¼šæ’ç®¡å´å¤§è…¿å¿…é ˆä¿æŒä¼¸ç›´ (Keep straight)ï¼Œä¸å¯å½æ›²ï¼ŒLog roll ç¿»èº«éœ€ç‰¹åˆ¥å°å¿ƒã€‚<br>2. <b>åºŠé ­é«˜åº¦</b>ï¼šé€šå¸¸é™åˆ¶ < 30 åº¦ï¼Œé¿å…å°ç®¡æ‰“æŠ˜æˆ–ç§»ä½ã€‚<br>3. <b>å¾ªç’°è©•ä¼°</b>ï¼šæ²»ç™‚å‰å¾Œå‹™å¿…è§¸æ‘¸è¶³èƒŒå‹•è„ˆè·³å‹•ã€‚'
  },
  {
    id: 'cvc', title: 'CVC ä¸­å¿ƒéœè„ˆå°ç®¡', short: 'Central Line',
    icon: '<path d="M12 5v14M5 12h14"/>',
    loc: 'Neck (IJV), Chest (Subclavian), Groin (Femoral)ã€‚',
    func: 'çµ¦è—¥ã€è¼¸æ¶²ã€æ¸¬é‡ CVPã€‚',
    ind: 'é•·æœŸè¼¸æ¶²ã€æ€¥æ•‘çµ¦è—¥ã€‚',
    contra: 'ç„¡çµ•å°é‹å‹•ç¦å¿Œï¼Œä½†éœ€æ³¨æ„ç®¡è·¯å¼µåŠ›ã€‚',
    comp: '<ul><li>ç§»é™¤æ™‚ç©ºæ°£æ “å¡ã€‚</li><li>æ°£èƒ¸ (Subclavian insertion)ã€‚</li></ul>',
    pt_precautions: '<b>[æ³¨æ„å¼µåŠ›]</b><br>1. <b>Neck/Chest</b>ï¼šè‚©é—œç¯€æ´»å‹• (ROM) æ™‚é¿å…éåº¦å¤–å±•æˆ–ä¸ŠæŠ¬ï¼Œä»¥å…æ‹‰æ‰¯ç¸«ç·šã€‚<br>2. <b>Femoral</b>ï¼šé«–é—œç¯€å±ˆæ›²é€šå¸¸å…è¨±è‡³ 90 åº¦ (è¦–å°ç®¡æè³ª)ï¼Œä½†éœ€é¿å…åè¦†æ“ å£“å°è‡´æ “å¡ã€‚<br>3. <b>è½‰ä½</b>ï¼šå°å¿ƒç®¡è·¯å‹¾åˆ°åºŠæ¬„æˆ–é»æ»´æ¶ã€‚'
  },
  {
    id: 'aline', title: 'A-line å‹•è„ˆå°ç®¡', short: 'BP Monitor',
    icon: '<path d="M2 12h20M2 12l2-2m2 2l2 2"/>',
    loc: 'Radial (æ‰‹è…•), Femoral (é¼ è¹Š), Dorsalis Pedis (è¶³èƒŒ)ã€‚',
    func: 'å³æ™‚è¡€å£“ç›£æ¸¬ã€æŠ½è¡€ã€‚',
    ind: 'è¡€å¾ªä¸ç©©ã€ä½¿ç”¨å‡å£“åŠ‘ã€‚',
    contra: '<ul><li><b>Radial</b>ï¼šæ‰‹è…•éåº¦å½æ›² (æœƒ damping)ã€‚</li><li><b>Femoral</b>ï¼šé«–é—œç¯€éåº¦å±ˆæ›²ã€‚</li></ul>',
    comp: '<ul><li>ç®¡è·¯è„«è½æœƒ<b>å™´å°„ç‹€å‡ºè¡€</b>ã€‚</li><li>æœ«æ¢¢ç™¼ç´º (æ “å¡)ã€‚</li></ul>',
    pt_precautions: '<b>[é˜²è„«è½]</b><br>1. <b>æº–ç¢ºåº¦</b>ï¼šè‹¥æ”¹è®Šé«”ä½ (å/ç«™)ï¼ŒTransducer éœ€é‡æ–°æ­¸é›¶ (å°é½Šè…‹ä¸­ç·š)ï¼Œå¦å‰‡è¡€å£“æ•¸å€¼ä¸æº–ï¼Œæ˜“èª¤åˆ¤ç—…æƒ…ã€‚<br>2. <b>æ´»å‹•</b>ï¼šæ‰‹è…• A-line é€šå¸¸æœ‰å‰¯æœ¨å›ºå®šï¼Œé‹å‹•æ™‚é¿å…å£“è¿«ã€‚Femoral A-line ä¸‹åºŠæ™‚éœ€å›ºå®šå¦¥ç•¶ï¼Œé¿å…æ‹‰æ‰¯å‡ºè¡€ã€‚<br>3. <b>æ„å¤–ç§»é™¤</b>ï¼šè‹¥ä¸æ…æ‹”é™¤ï¼Œç«‹å³åŠ å£“æ­¢è¡€è‡³å°‘ 5-10 åˆ†é˜ä¸¦å‘¼å«è­·ç†å¸«ã€‚'
  },
  {
    id: 'swan', title: 'Swan-Ganz è‚ºå‹•è„ˆå°ç®¡', short: 'Hemodynamics',
    icon: '<circle cx="12" cy="12" r="10"/><path d="M12 12l4 4"/>',
    loc: 'é ¸éœè„ˆ â†’ å³å¿ƒ â†’ è‚ºå‹•è„ˆã€‚',
    func: 'æ¸¬é‡ PCWP, CO, SVRã€‚å°ç®¡å¾ˆé•·ä¸”ç¶“éå¿ƒè‡Ÿã€‚',
    ind: 'å¿ƒè¡°ç«­ã€è‚ºé«˜å£“è©•ä¼°ã€‚',
    contra: 'åš´é‡å¿ƒå¾‹ä¸æ•´æ™‚å°å¿ƒæ´»å‹•ã€‚',
    comp: '<ul><li>è‚ºå‹•è„ˆç ´è£‚ã€‚</li><li>å¿ƒå¾‹ä¸æ•´ (VPC/VT)ã€‚</li></ul>',
    pt_precautions: '<b>[å°å¿ƒæ‹‰æ‰¯]</b><br>1. <b>é–å®š</b>ï¼šç¢ºèªå°ç®¡è­·å¥— (Sheath) æ˜¯å¦å›ºå®šåœ¨é–å®šä½ç½®ï¼Œé¿å…é‹å‹•æ™‚å°ç®¡æ»‘å…¥/æ»‘å‡ºå¿ƒè‡Ÿã€‚<br>2. <b>å¿ƒå¾‹</b>ï¼šæ´»å‹•æ™‚å¯†åˆ‡è§€å¯Ÿ ECGï¼Œè‹¥å‡ºç¾ä¸å°‹å¸¸çš„ VPCï¼Œå¯èƒ½æ˜¯å°ç®¡åˆºæ¿€å³å¿ƒå®¤ï¼Œéœ€æš«åœæ´»å‹•ã€‚<br>3. <b>Wedge</b>ï¼šPT æ²»ç™‚æ™‚é€šå¸¸ä¸éœ€è¦ Wedgeï¼Œç¢ºèªæ°£çƒå·²æ´©æ°£ã€‚'
  },
  {
    id: 'picc', title: 'PICC å‘¨é‚Šä¸­å¿ƒå°ç®¡', short: 'Long-term IV',
    icon: '<rect x="4" y="4" width="16" height="16" rx="2"/>',
    loc: 'ä¸Šè‡‚ (Basilic V.) â†’ SVCã€‚',
    func: 'é•·æœŸæŠ—ç”Ÿç´ ã€TPNã€‚',
    ind: 'å‘¨é‚Šè¡€ç®¡å·®ã€éœ€é•·æœŸæ²»ç™‚ã€‚',
    contra: '<ul><li><b>ç¦å¿Œ</b>ï¼šåœ¨ç½®ç®¡å´é‡è¡€å£“ã€‚</li><li><b>ç¦å¿Œ</b>ï¼šä½¿ç”¨è…‹ä¸‹æ‹æ– (Crutches) å£“è¿«è©²å´ã€‚</li></ul>',
    comp: 'å°ç®¡ç§»ä½ã€éœè„ˆç‚ã€‚',
    pt_precautions: '<b>[ä¸Šè‚¢æ´»å‹•]</b><br>1. <b>ROM</b>ï¼šç½®ç®¡å¾ŒåˆæœŸé¿å…åŠ‡çƒˆæ‰‹è‡‚å¤–å±•/æ—‹è½‰ï¼Œç©©å®šå¾Œé€šå¸¸å¯è‡ªç”±æ´»å‹•ã€‚<br>2. <b>æ‰¿é‡</b>ï¼šé¿å…åœ¨è©²å´æ‰‹è‡‚é€²è¡Œé«˜å¼·åº¦çš„æ‰¿é‡è¨“ç·´ (Weight bearing)ã€‚<br>3. <b>è§€å¯Ÿ</b>ï¼šæ¸¬é‡è‡‚åœï¼Œè‹¥é‹å‹•å¾Œæ‰‹è‡‚è…«è„¹ï¼Œéœ€æ‡·ç–‘ DVTã€‚'
  },
  {
    id: 'porta', title: 'Port-A äººå·¥è¡€ç®¡', short: 'Implantable Port',
    icon: '<circle cx="12" cy="12" r="6" stroke="currentColor" fill="none"/><path d="M12 6v6"/>',
    loc: 'å‰èƒ¸çš®ä¸‹ (æ‘¸èµ·ä¾†ç¡¬ç¡¬çš„åœ“ç›¤) â†’ SVCã€‚',
    func: 'åŒ–ç™‚å°ˆç”¨ï¼Œå¯é•·æœŸä½¿ç”¨ (æ•¸å¹´)ã€‚',
    ind: 'ç™Œç—‡åŒ–ç™‚ç—…äººã€‚',
    contra: '<ul><li><b>æœªä¸‹é‡æ™‚</b>ï¼šå¹¾ç„¡ç¦å¿Œï¼Œå¯è‡ªç”±æ´»å‹•ã€‚</li><li><b>ä¸‹é‡å¾Œ (On needle)</b>ï¼šé¿å…åŒå´è‚©é—œç¯€åŠ‡çƒˆå¤§ç¯„åœæ´»å‹•ã€‚</li></ul>',
    comp: 'å°ç®¡æ–·è£‚ (Pinch-off syndrome)ã€è—¥ç‰©å¤–æ»²ã€‚',
    pt_precautions: '<b>[éš±å½¢å† è»]</b><br>1. <b>å¤–è§€</b>ï¼šå¹³æ™‚åŸ‹åœ¨çš®ä¸‹ï¼Œå¤–è§€ç„¡ç®¡è·¯ï¼Œå®¹æ˜“è¢«å¿½ç•¥ã€‚PT è§¸è¨ºèƒ¸å»“æ™‚éœ€é¿é–‹åŸºåº§ã€‚<br>2. <b>ä¸‹é‡æ™‚</b>ï¼šè‹¥æœ‰é»æ»´é€£æ¥ (æ’è‘— Huber needle)ï¼Œé‹å‹•æ™‚éœ€é¿å…æ‹‰æ‰¯ï¼Œé˜²é‡é ­æ»‘å‡ºå°è‡´åŒ–ç™‚è—¥å¤–æ»² (çµ„ç¹”å£æ­»)ã€‚<br>3. <b>Pinch-off</b>ï¼šé¿å…é–éª¨èˆ‡ç¬¬ä¸€è‚‹éª¨é–“é•·æœŸå¤¾æ“ çš„å‹•ä½œ (å¦‚é•·æ™‚é–“èˆ‰é‡ç‰©)ã€‚'
  },
  {
    id: 'double', title: 'Double Lumen æ´—è…å°ç®¡', short: 'Hemodialysis',
    icon: '<circle cx="12" cy="12" r="10"/><path d="M12 6v6M6 12h12"/>',
    loc: 'IJV (é ¸) æˆ– Femoral (è‚¡)ã€‚',
    func: 'è¡€æ¶²é€æ (HD)ã€‚ç®¡å¾‘å¾ˆç²—ã€‚',
    ind: 'æ€¥æ€§/æ…¢æ€§è…è¡°ç«­ã€‚',
    contra: '<ul><li><b>Femoral</b>ï¼šæ´—è…ä¸­çµ•å°ä¸å¯å½æ›²é«–é—œç¯€ã€‚</li><li><b>IJV</b>ï¼šé¿å…é ¸éƒ¨éåº¦æ‰­è½‰ã€‚</li></ul>',
    comp: 'è¡€æ “ã€æ„ŸæŸ“ã€‚',
    pt_precautions: '<b>[ç¡¬ä¸”ç²—]</b><br>1. <b>ä¸é©æ„Ÿ</b>ï¼šå°ç®¡è¼ƒç¡¬ï¼Œé ¸éƒ¨ç½®ç®¡ç—…äººè½‰é ­æœƒå¡å¡çš„ï¼Œå‹¿å¼·è¡Œæ‰³å‹•ã€‚<br>2. <b>æ´—è…ä¸­</b>ï¼šè‹¥ç—…äººæ­£åœ¨æ´—è… (æ¥æ©Ÿå™¨)ï¼Œé€šå¸¸ä¸å»ºè­°ä¸‹åºŠï¼Œå¯åšç°¡å–®çš„ Bed exerciseï¼Œä½†éœ€ç¢ºä¿ç®¡è·¯ä¸æ‰“æŠ˜ã€‚<br>3. <b>æ´—è…å¾Œ</b>ï¼šç¢ºèªå‚·å£ç„¡æ»²è¡€å†é€²è¡Œé«˜å¼·åº¦æ´»å‹•ã€‚'
  }
];

// --- ç¨‹å¼é‚è¼¯ ---
const mainContainer = document.getElementById('mainContainer');
const sidebarList = document.getElementById('sidebarList');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('sidebarOverlay');

function init(){
  let navHTML = `<a href="#" class="nav-item" onclick="goHome(); return false;">ğŸ  Dashboard</a>`;
  navHTML += db.map(d => `<a href="#${d.id}" class="nav-item" onclick="route('${d.id}'); return false;">${d.title}</a>`).join('');
  sidebarList.innerHTML = navHTML;

  const hash = location.hash.replace('#','');
  if(hash && db.find(d=>d.id===hash)) renderDetail(hash);
  else renderHome();
}

function renderHome(){
  let html = `<div class="home-grid">`;
  html += db.map(d => `
    <div class="device-card" onclick="route('${d.id}')">
      <div class="card-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${d.icon}</svg></div>
      <h3 class="card-title">${d.title}</h3>
      <div class="card-desc">${d.func}</div>
    </div>
  `).join('');
  html += `</div>`;
  mainContainer.innerHTML = html;
  closeSidebar();
}

function renderDetail(id){
  const d = db.find(item => item.id === id);
  if(!d) return renderHome();
  const svg = getDiagram(id);
  const html = `
    <div class="detail-page active">
      <button class="back-btn" onclick="goHome()">â† è¿”å›åˆ—è¡¨</button>
      <div class="detail-header">
        <span class="tag">${d.short}</span>
        <h1 class="detail-title">${d.title}</h1>
      </div>
      <div class="diagram-box">${svg}</div>
      <div class="section-grid t-blue">
        <div class="info-card"><div class="info-title">ğŸ“ ä½ç½® (Location)</div><div class="info-content">${d.loc}</div></div>
        <div class="info-card"><div class="info-title">âš™ ä½œç”¨ (Function)</div><div class="info-content">${d.func}</div></div>
      </div>
      <div class="section-grid t-pt">
        <div class="info-card full-width"><div class="info-title">âš ï¸ PT ä»‹å…¥é ˆçŸ¥ (Precautions)</div><div class="info-content">${d.pt_precautions}</div></div>
      </div>
      <div class="section-grid t-red">
        <div class="info-card"><div class="info-title">â›” ç¦å¿Œ (Contraindication)</div><div class="info-content">${d.contra}</div></div>
        <div class="info-card"><div class="info-title">âš¡ é¢¨éšª (Complication)</div><div class="info-content">${d.comp}</div></div>
      </div>
    </div>
  `;
  mainContainer.innerHTML = html;
  mainContainer.scrollTop = 0;
  closeSidebar();
}

// --- DIAGRAM GENERATOR (å« Port-A) ---
function getDiagram(type){
  const txtStyle = `font-family:sans-serif; font-size:10px; fill:currentColor; font-weight:bold;`;
  let inner = '';
  
  if(type === 'ecmo'){
    inner = `
      <defs><marker id="ar" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto"><path d="M0,0 L0,6 L6,3 z" fill="var(--accent)"/></marker></defs>
      <path d="M60 20 Q100 20 100 60 L100 130" stroke="currentColor" stroke-opacity="0.1" stroke-width="4" fill="none"/>
      <path d="M90 120 L90 80 Q90 60 60 60 L30 60 L30 80" stroke="#0284c7" stroke-width="3" fill="none" marker-end="url(#ar)"/>
      <rect x="20" y="80" width="40" height="30" rx="4" fill="var(--card-bg)" stroke="currentColor" stroke-width="2"/>
      <text x="25" y="100" style="${txtStyle}">Pump</text>
      <path d="M40 110 L40 130 Q40 140 70 140 L110 140 L110 120" stroke="#e11d48" stroke-width="3" fill="none"/>
      <text x="35" y="55" style="${txtStyle} fill:#0284c7">Venous (In)</text>
      <text x="70" y="152" style="${txtStyle} fill:#e11d48">Arterial (Out)</text>
    `;
  } else if (type === 'iabp'){
    inner = `
      <path d="M120 140 L120 50 Q120 10 70 10 Q30 10 30 60" stroke="#e11d48" stroke-width="20" opacity="0.15" fill="none"/>
      <rect x="115" y="50" width="10" height="40" rx="4" fill="#f59e0b" opacity="0.8"/>
      <line x1="120" y1="90" x2="120" y2="160" stroke="#666" stroke-width="2"/>
      <text x="140" y="70" style="${txtStyle} fill:#f59e0b">Balloon</text>
      <text x="60" y="25" style="${txtStyle}">Aorta</text>
      <text x="80" y="40" style="${txtStyle} font-size:9px">L. Subclavian</text>
    `;
  } else if (type === 'cvc'){
    inner = `
      <path d="M50 10 Q100 10 130 30 L130 150" stroke="currentColor" stroke-width="1" fill="none" opacity="0.2"/>
      <path d="M100 20 L100 80 Q100 100 80 120" stroke="#0284c7" stroke-width="14" opacity="0.2" fill="none"/>
      <text x="110" y="60" style="${txtStyle}">SVC</text>
      <path d="M70 10 L80 30 L100 40 L100 85" stroke="#eab308" stroke-width="3" fill="none"/>
      <circle cx="100" cy="85" r="3" fill="#eab308"/>
      <text x="75" y="20" style="${txtStyle}">IJV</text>
      <text x="110" y="85" style="${txtStyle}">Tip</text>
    `;
  } else if (type === 'aline'){
    inner = `
      <path d="M20 60 Q60 60 100 60 L180 60" stroke="currentColor" stroke-width="15" stroke-opacity="0.1" fill="none"/>
      <path d="M20 62 L180 62" stroke="#e11d48" stroke-width="3" fill="none" opacity="0.6"/>
      <path d="M80 30 L90 62" stroke="#eab308" stroke-width="3" fill="none"/>
      <text x="110" y="75" style="${txtStyle} fill:#e11d48">Radial A.</text>
      <text x="40" y="25" style="${txtStyle}">Cannula</text>
    `;
  } else if (type === 'swan'){
    inner = `
      <path d="M30 40 Q50 20 80 40 T130 40" stroke="#0284c7" stroke-width="30" opacity="0.1" fill="none"/>
      <text x="30" y="70" style="${txtStyle}">RA</text>
      <text x="130" y="70" style="${txtStyle}">PA</text>
      <path d="M10 30 Q40 10 70 40 T130 40" stroke="#eab308" stroke-width="3" fill="none" stroke-dasharray="4,2"/>
      <circle cx="130" cy="40" r="6" fill="#eab308" opacity="0.7"/>
      <text x="140" y="45" style="${txtStyle}">Wedge</text>
    `;
  } else if (type === 'picc'){
    inner = `
      <path d="M10 80 Q50 80 80 60 Q120 40 140 40" stroke="currentColor" stroke-width="20" stroke-opacity="0.1" fill="none"/>
      <path d="M140 30 L140 90" stroke="#0284c7" stroke-width="10" opacity="0.2" fill="none"/>
      <path d="M10 80 Q50 80 80 60 Q120 40 140 40 L140 70" stroke="#eab308" stroke-width="2" fill="none"/>
      <text x="10" y="95" style="${txtStyle}">Arm</text>
      <text x="150" y="60" style="${txtStyle}">SVC</text>
    `;
  } else if (type === 'porta'){
    // Port-A specific diagram
    inner = `
      <!-- Skin Line -->
      <path d="M20 40 L180 40" stroke="currentColor" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
      <text x="20" y="35" style="${txtStyle}" opacity="0.5">Skin Surface</text>
      
      <!-- SVC/Vein -->
      <path d="M120 40 L120 140" stroke="#0284c7" stroke-width="16" opacity="0.15" fill="none"/>
      <text x="135" y="100" style="${txtStyle}">SVC</text>
      
      <!-- Port Body (Subcutaneous) -->
      <path d="M40 60 L80 60 L85 80 L35 80 Z" fill="#666" opacity="0.2"/> <!-- Pocket -->
      <rect x="45" y="55" width="30" height="20" rx="5" fill="#333" stroke="currentColor"/> <!-- Base -->
      <circle cx="60" cy="65" r="6" fill="#ccc"/> <!-- Septum -->
      
      <!-- Catheter -->
      <path d="M75 65 Q100 65 120 80 L120 120" stroke="#eab308" stroke-width="3" fill="none"/>
      
      <!-- Labels -->
      <text x="40" y="95" style="${txtStyle}">Port Body (Subcut.)</text>
      <text x="100" y="130" style="${txtStyle} fill:#eab308">Catheter Tip</text>
      
      <!-- Needle (Optional visualization) -->
      <line x1="60" y1="10" x2="60" y2="65" stroke="#e11d48" stroke-width="2" opacity="0.3"/>
      <text x="65" y="20" style="${txtStyle} fill:#e11d48" opacity="0.5">Needle (If accessed)</text>
    `;
  } else if (type === 'double'){
    inner = `
      <rect x="80" y="10" width="40" height="130" fill="#0284c7" opacity="0.1"/>
      <path d="M100 0 L100 80" stroke="#666" stroke-width="8" opacity="0.5"/>
      <path d="M100 80 L95 110" stroke="#e11d48" stroke-width="4" fill="none"/>
      <path d="M100 80 L105 120" stroke="#0284c7" stroke-width="4" fill="none"/>
      <text x="50" y="110" style="${txtStyle} fill:#e11d48">Out (A)</text>
      <text x="115" y="125" style="${txtStyle} fill:#0284c7">In (V)</text>
      <text x="125" y="30" style="${txtStyle}">Vein</text>
    `;
  }
  return `<svg viewBox="0 0 200 160" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">${inner}</svg>`;
}

function route(id){ location.hash = id; renderDetail(id); }
function goHome(){ location.hash = ''; renderHome(); }

const menuBtn = document.getElementById('menuBtn');
const closeBtn = document.getElementById('closeSidebar');
const themeBtn = document.getElementById('themeBtn');
const sidebarOverlay = document.getElementById('sidebarOverlay');

function openSidebar(){ sidebar.classList.add('open'); sidebarOverlay.classList.add('open'); }
function closeSidebar(){ sidebar.classList.remove('open'); sidebarOverlay.classList.remove('open'); }

menuBtn.addEventListener('click', openSidebar);
closeBtn.addEventListener('click', closeSidebar);
sidebarOverlay.addEventListener('click', closeSidebar);

themeBtn.addEventListener('click', ()=>{
  const h = document.documentElement;
  h.setAttribute('data-theme', h.hasAttribute('data-theme') ? '' : 'dark');
});

window.addEventListener('popstate', init);
init();
</script>
</body>
</html>
